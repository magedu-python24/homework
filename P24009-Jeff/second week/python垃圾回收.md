# python 的Garbage Collection

**本文档主要记录python的垃圾回收机制。**
>> 变量赋值会使对象引用计数增加；函数运行完成，局部变量会销毁，对象引用计数减少；
>> 当内存中的对象引用计数变成0，这个对象便被视为垃圾；
>> 垃圾回收的动作和时间由解释器的算法决定，一般情况下不需要手动进行垃圾回收的操作，解释器会在特定时间自动完成垃圾回收的操作。

## 分类

- 引用计数
- 标记-清除
- 分代回收

>> 引用计数机制为主，标记-清除和分代收集两种机制为辅。
>> 垃圾回收=垃圾检测+释放

## 1. 引用计数

### 1. 定义

| 定义 | 变量赋值会使对象引用计数增加；函数运行完成，局部变量会销毁，对象引用计数减少；当内存中的对象引用计数变成0，垃圾回收机制将这个对象丢弃为垃圾 |
| ---- | ------------------------------------------------------------ |
| 优势 | 简单，实时性                                                 |
| 缺点 | 维护性高，不能解决循环引用                                   |

### 2. 举例

## 2. 标记-清除

### 1. 定义

>> 定义：基于追踪回收（tracing GC）技术实现的垃圾回收算法。它分为两个阶段：
    第一阶段是标记阶段，GC会把所有的『活动对象』打上标记，
    第二阶段是把那些没有标记的对象『非活动对象』进行回收。
>> 

### 2. 举例

## 3. 分代回收
### 1. 定义
>> 分代回收是一种以空间换时间的操作方式，Python将内存根据对象的存活时间划分为不同的集合，每个集合称为一个代，Python将内存分为了3“代”，分别为年轻代（第0代）、中年代（第1代）、老年代（第2代），他们对应的是3个链表，它们的垃圾收集频率与对象的存活时间的增大而减小。新创建的对象都会分配在年轻代，年轻代链表的总数达到上限时，Python垃圾收集机制就会被触发，把那些可以被回收的对象回收掉，而那些不会回收的对象就会被移到中年代去，依此类推，老年代中的对象是存活时间最久的对象，甚至是存活于整个系统的生命周期内。同时，分代回收是建立在标记清除技术基础之上。分代回收同样作为Python的辅助垃圾收集技术处理那些容器对象

### 2. 举例